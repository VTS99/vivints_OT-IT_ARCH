<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivin T.S. — OT/IT Architecture Plan</title>
    <meta name="description" 
     content="OT/IT Architecture - PLC to IT Integration with AI & ML by Vivin T.S.">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- ================================ -->
    <!--     INTRO / LANDING PAGE         -->
    <!-- ================================ -->
    <section class="intro-page" id="intro">
        <canvas class="particles" id="particleCanvas"></canvas>
        <div class="intro-content">
            <h1 class="intro-name">VIVIN T.S.</h1>
            <p class="intro-title">Assistant Manager – Automation &nbsp;|&nbsp; Digital Manufacturing &nbsp;|&nbsp; OT
                Software &nbsp;|&nbsp; IIoT</p>
            <a href="#" class="cta-btn" id="viewArchBtn">
                View IT/OT Architecture Plan <span class="arrow">→</span>
            </a>
        </div>
        <div class="scroll-hint"><span>scroll</span>
            <div class="line"></div>
        </div>

        <!-- Footer on intro page -->
        <footer class="site-footer"
            style="position:absolute;bottom:0;left:0;right:0;border-top:none;background:transparent;">
            <div class="footer-credit">Created and Developed by Vivin T.S.</div>
            <div class="footer-links">
                <a href="tel:+917338937394">+91 7338937394</a>
                <a href="mailto:vivints.17@gmail.com">vivints.17@gmail.com</a>
                <a href="https://linkedin.com/in/vivin-t-s-21aa4210a" target="_blank">LinkedIn</a>
            </div>
        </footer>
    </section>

    <!-- ================================ -->
    <!--     ARCHITECTURE PAGE            -->
    <!-- ================================ -->
    <div class="arch-page" id="archPage">

        <button class="menu-btn" id="menuBtn" aria-label="Menu">☰</button>

        <nav class="sidebar" id="sidebar">
            <div class="sidebar-brand">
                <h2>OT/IT Architecture</h2>
                <div class="sub">PLC to MES · Predictive Analytics</div>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Architecture Layers</div>
                <a href="#layer1" class="nav-link"><span class="dot dot-ot"></span> OT Level (Shop Floor)</a>
                <a href="#layer2" class="nav-link"><span class="dot dot-edge"></span> Edge Computing</a>
                <a href="#layer3" class="nav-link"><span class="dot dot-it"></span> IT Data Platform</a>
                <a href="#layer4" class="nav-link"><span class="dot dot-app"></span> Application &amp; Analytics</a>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Details</div>
                <a href="#data-flow-details" class="nav-link"><span class="dot dot-detail"></span> Data Flow Details</a>
                <a href="#tech-stack" class="nav-link"><span class="dot dot-detail"></span> Technology Stack</a>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Diagrams</div>
                <a href="#flow-diagram" class="nav-link"><span class="dot dot-diagram"></span> Flow Diagram</a>
                <a href="#integration-matrix" class="nav-link"><span class="dot dot-diagram"></span> Integration
                    Matrix</a>
            </div>

            <a href="#" class="back-link" id="backToIntro">← Back to Intro</a>
        </nav>

        <main class="main">
            <div class="page-head">
                <h1>OT/IT Architecture</h1>
                <p>PLC to MES Integration with Predictive Analytics</p>
            </div>

            <!-- LAYER 1 -->
            <section class="arch-section anim-in" id="layer1">
                <div class="section-label">Layer 1: OT Level (Shop Floor)</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">PLCs &amp; Controllers</div>
                        <div class="card-desc">Industrial controllers managing production machines, sensors, and
                            actuators with real-time control logic</div>
                        <div class="tags"><span class="tag">Siemens S7</span><span class="tag">Allen-Bradley</span><span
                                class="tag">Schneider</span><span class="tag">Mitsubishi</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">SCADA Systems</div>
                        <div class="card-desc">Supervisory control and data acquisition for real-time monitoring and
                            local HMI interfaces</div>
                        <div class="tags"><span class="tag">WinCC</span><span class="tag">FactoryTalk</span><span
                                class="tag">Ignition</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Local Data Storage</div>
                        <div class="card-desc">PLC-generated CSV files stored locally on machines for batch processing
                            and historical records</div>
                        <div class="tags"><span class="tag">CSV Files</span><span class="tag">Local FS</span><span
                                class="tag">Network Share</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">OPC UA | SFTP</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- LAYER 2 -->
            <section class="arch-section anim-in" id="layer2">
                <div class="section-label">Layer 2: Edge Computing &amp; Data Collection</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Kepware OPC UA Server</div>
                        <div class="card-desc">Industrial connectivity platform aggregating tag-based real-time data
                            from multiple PLCs via OPC UA protocol</div>
                        <div class="tags"><span class="tag">OPC UA</span><span class="tag">Tag Manager</span><span
                                class="tag">Real-time</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">SyncBridge (SFTP/NFS)</div>
                        <div class="card-desc">Industrial-grade file synchronization backbone for collecting CSV files
                            from machines with multi-instance architecture</div>
                        <div class="tags"><span class="tag">SFTP</span><span class="tag">NFS</span><span
                                class="tag">Python</span><span class="tag">Multi-instance</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Edge Data Buffer</div>
                        <div class="card-desc">Temporary storage and pre-processing layer ensuring data integrity and
                            handling network disruptions</div>
                        <div class="tags"><span class="tag">Redis</span><span class="tag">TimescaleDB</span><span
                                class="tag">Message Queue</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">HTTP/MQTT | REST API</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- LAYER 3 -->
            <section class="arch-section anim-in" id="layer3">
                <div class="section-label">Layer 3: IT Layer (Data Platform &amp; Storage)</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Python Data Ingestion Service</div>
                        <div class="card-desc">ETL pipeline for data validation, transformation, and standardization of
                            both tag-based and file-based data</div>
                        <div class="tags"><span class="tag">Pandas</span><span class="tag">Apache Airflow</span><span
                                class="tag">FastAPI</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Time-Series Database</div>
                        <div class="card-desc">High-performance storage for real-time tag data with efficient querying
                            and aggregation capabilities</div>
                        <div class="tags"><span class="tag">InfluxDB</span><span class="tag">TimescaleDB</span><span
                                class="tag">SQL</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Data Lake</div>
                        <div class="card-desc">Centralized repository for raw CSV files, logs, and historical data for
                            long-term storage and analytics</div>
                        <div class="tags"><span class="tag">MinIO</span><span class="tag">S3</span><span
                                class="tag">Parquet</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Data Quality &amp; Monitoring</div>
                        <div class="card-desc">Automated data validation, anomaly detection, and quality scoring for
                            incoming production data</div>
                        <div class="tags"><span class="tag">Great Expectations</span><span
                                class="tag">Prometheus</span><span class="tag">Grafana</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">REST API | WebSocket</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- LAYER 4 -->
            <section class="arch-section anim-in" id="layer4">
                <div class="section-label">Layer 4: Application &amp; Analytics Layer</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Predictive Analytics Engine</div>
                        <div class="card-desc">ML models for equipment failure prediction, quality forecasting, and
                            anomaly detection using historical and real-time data</div>
                        <div class="tags"><span class="tag">Scikit-learn</span><span class="tag">TensorFlow</span><span
                                class="tag">Prophet</span><span class="tag">XGBoost</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Real-time Dashboard</div>
                        <div class="card-desc">Web-based visualization platform for KPIs, OEE, equipment status, and
                            predictive maintenance alerts</div>
                        <div class="tags"><span class="tag">React</span><span class="tag">Plotly</span><span
                                class="tag">WebSocket</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">MES Integration</div>
                        <div class="card-desc">Manufacturing Execution System integration for production planning,
                            scheduling, and quality management</div>
                        <div class="tags"><span class="tag">SAP MES</span><span class="tag">REST API</span><span
                                class="tag">ISA-95</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">BI &amp; Reporting</div>
                        <div class="card-desc">Business intelligence tools for historical analysis, trend
                            identification, and executive reporting</div>
                        <div class="tags"><span class="tag">Power BI</span><span class="tag">Tableau</span><span
                                class="tag">Python Reports</span></div>
                    </div>
                </div>
            </section>

            <!-- Legend -->
            <div class="legend anim-in">
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--ot-color)"></div>OT Level
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--edge-color)"></div>Edge Computing
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--it-color)"></div>IT Platform
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--app-color)"></div>Application
                </div>
            </div>

            <!-- DATA FLOW DETAILS -->
            <section class="info-panel anim-in" id="data-flow-details">
                <h2>Data Flow Details</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Tag-Based Data Collection (OPC UA)</h3>
                        <ul>
                            <li>Real-time polling of PLC tags via Kepware</li>
                            <li>High-frequency data (1-10 Hz) for critical parameters</li>
                            <li>Process variables, setpoints, alarms, status bits</li>
                            <li>Low-latency streaming to time-series database</li>
                            <li>Supports multiple OPC UA namespaces</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>File-Based Data Collection (SFTP/NFS)</h3>
                        <ul>
                            <li>Batch processing of machine-generated CSV files</li>
                            <li>Production logs, quality reports, recipe data</li>
                            <li>SyncBridge handles multi-machine synchronization</li>
                            <li>Automatic file validation and error handling</li>
                            <li>Supports large file transfers with resume capability</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Python Application Functions</h3>
                        <ul>
                            <li>Data preprocessing and feature engineering</li>
                            <li>Machine learning model training and inference</li>
                            <li>Predictive maintenance algorithm execution</li>
                            <li>REST API for external system integration</li>
                            <li>Scheduled reporting and alerting</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Predictive Analytics Capabilities</h3>
                        <ul>
                            <li>Equipment failure prediction (RUL estimation)</li>
                            <li>Quality deviation forecasting</li>
                            <li>Process optimization recommendations</li>
                            <li>Anomaly detection and root cause analysis</li>
                            <li>Energy consumption optimization</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- TECH STACK -->
            <section class="info-panel anim-in" id="tech-stack">
                <h2>Technology Stack </h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Edge Layer Technologies</h3>
                        <ul>
                            <li>Kepware KEPServerEX for OPC UA connectivity</li>
                            <li>Python 3.11+ for SyncBridge and data agents</li>
                            <li>Redis for message queuing and caching</li>
                            <li>Docker for containerized edge deployments</li>
                            <li>MQTT broker (Mosquitto) for lightweight messaging</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Data Platform Stack</h3>
                        <ul>
                            <li>TimescaleDB/InfluxDB for time-series data</li>
                            <li>PostgreSQL for relational metadata</li>
                            <li>MinIO/S3 for object storage (data lake)</li>
                            <li>Apache Airflow for workflow orchestration</li>
                            <li>FastAPI for Python microservices</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>ML/Analytics Stack</h3>
                        <ul>
                            <li>Pandas, NumPy for data manipulation</li>
                            <li>Scikit-learn for traditional ML algorithms</li>
                            <li>Prophet/ARIMA for time-series forecasting</li>
                            <li>MLflow for model versioning and tracking</li>
                            <li>Jupyter notebooks for exploratory analysis</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Security &amp; Networking</h3>
                        <ul>
                            <li>Industrial DMZ with firewall segmentation</li>
                            <li>VPN/Zero Trust for remote access</li>
                            <li>TLS encryption for all data in transit</li>
                            <li>RBAC (Role-Based Access Control)</li>
                            <li>Audit logging and SIEM integration</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- FLOW DIAGRAM -->
            <section class="flow-panel anim-in" id="flow-diagram">
                <h2>Complete Data Flow Diagram</h2>

                <!-- OPC UA Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Real-time Tag Data Flow (OPC UA)</h3>
                    <div class="flow-steps">
                        <div class="flow-node start">
                            <div class="node-num">1</div>
                            <div class="node-body">
                                <div class="t">PLC Tags</div>
                                <div class="d">Temperature, Pressure, Speed, Status</div>
                                <div class="f">Polling: 1-10 Hz</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">OPC UA Protocol</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">2</div>
                            <div class="node-body">
                                <div class="t">Kepware OPC UA Server</div>
                                <div class="d">Tag aggregation &amp; protocol conversion</div>
                                <div class="x">• Multi-PLC support<br>• Tag grouping<br>• Dead-band filtering</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">OPC UA Client / MQTT</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">3</div>
                            <div class="node-body">
                                <div class="t">Python Data Agent</div>
                                <div class="d">Data validation &amp; transformation</div>
                                <div class="x">• Schema validation<br>• Unit conversion<br>• Quality checks</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">HTTP / WebSocket</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">4</div>
                            <div class="node-body">
                                <div class="t">Time-Series Database</div>
                                <div class="d">InfluxDB / TimescaleDB</div>
                                <div class="x">• High write throughput<br>• Retention policies<br>• Aggregations</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">SQL Query</div>
                        </div>
                        <div class="flow-node end">
                            <div class="node-num">5</div>
                            <div class="node-body">
                                <div class="t">Analytics &amp; Dashboards</div>
                                <div class="d">Real-time monitoring &amp; ML inference</div>
                                <div class="x">• Live charts<br>• Predictive alerts<br>• KPI calculation</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SFTP Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Batch File Data Flow (SFTP/NFS)</h3>
                    <div class="flow-steps">
                        <div class="flow-node start">
                            <div class="node-num">1</div>
                            <div class="node-body">
                                <div class="t">Machine CSV Files</div>
                                <div class="d">Production logs, Quality data, Recipes</div>
                                <div class="f">Generation: Per batch/shift</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">File System Watch</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">2</div>
                            <div class="node-body">
                                <div class="t">SyncBridge Agent</div>
                                <div class="d">File detection &amp; synchronization</div>
                                <div class="x">• Multi-instance<br>• File integrity check<br>• Resume capability</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">SFTP / NFS Transfer</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">3</div>
                            <div class="node-body">
                                <div class="t">Edge Buffer Storage</div>
                                <div class="d">Temporary staging area</div>
                                <div class="x">• Deduplication<br>• Checksum verify<br>• Queue management</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">REST API Upload</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">4</div>
                            <div class="node-body">
                                <div class="t">Python ETL Pipeline</div>
                                <div class="d">Data parsing &amp; enrichment</div>
                                <div class="x">• CSV parsing<br>• Schema mapping<br>• Data cleansing</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Dual Write</div>
                        </div>
                        <div class="split-grid">
                            <div class="flow-node">
                                <div class="node-num">5A</div>
                                <div class="node-body">
                                    <div class="t">Data Lake (S3/MinIO)</div>
                                    <div class="d">Raw file archive</div>
                                    <div class="x">• Long-term storage<br>• Versioning<br>• Parquet format</div>
                                </div>
                            </div>
                            <div class="flow-node">
                                <div class="node-num">5B</div>
                                <div class="node-body">
                                    <div class="t">PostgreSQL/TSDB</div>
                                    <div class="d">Structured data store</div>
                                    <div class="x">• Indexed queries<br>• Relational joins<br>• Fast retrieval</div>
                                </div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Data Access Layer</div>
                        </div>
                        <div class="flow-node end">
                            <div class="node-num">6</div>
                            <div class="node-body">
                                <div class="t">Analytics &amp; Reporting</div>
                                <div class="d">Historical analysis &amp; ML training</div>
                                <div class="x">• Batch processing<br>• Model training<br>• BI reports</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Predictive Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Predictive Analytics Flow</h3>
                    <div class="flow-steps h-flow">
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Data Sources</div>
                                <div class="d">Time-series + CSV + MES</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Feature Engineering</div>
                                <div class="d">Rolling stats, FFT, Lag features</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">ML Models</div>
                                <div class="d">XGBoost, LSTM, Prophet</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Predictions</div>
                                <div class="d">Failures, Quality, Energy</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Actions</div>
                                <div class="d">Alerts, Work orders, Optimization</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INTEGRATION MATRIX -->
            <section class="arch-section anim-in" id="integration-matrix">
                <div class="section-label">System Integration Matrix</div>
                <div class="matrix-grid">
                    <div class="mx mx-h"></div>
                    <div class="mx mx-h">PLC/SCADA</div>
                    <div class="mx mx-h">Kepware</div>
                    <div class="mx mx-h">SyncBridge</div>
                    <div class="mx mx-h">Python ETL</div>
                    <div class="mx mx-h">Database</div>
                    <div class="mx mx-h">MES</div>
                    <div class="mx mx-h">Analytics</div>

                    <div class="mx mx-l">PLC/SCADA</div>
                    <div class="mx">-</div>
                    <div class="mx on">OPC UA</div>
                    <div class="mx on">File Gen</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx mx-l">Kepware</div>
                    <div class="mx on">OPC UA</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">OPC Client</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx mx-l">SyncBridge</div>
                    <div class="mx on">SFTP/NFS</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">REST API</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx mx-l">Python ETL</div>
                    <div class="mx">-</div>
                    <div class="mx on">Subscribe</div>
                    <div class="mx on">REST API</div>
                    <div class="mx">-</div>
                    <div class="mx on">SQL/API</div>
                    <div class="mx on">REST API</div>
                    <div class="mx on">Data Feed</div>
                    <div class="mx mx-l">Database</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">Write</div>
                    <div class="mx">-</div>
                    <div class="mx on">Sync</div>
                    <div class="mx on">Query</div>
                    <div class="mx mx-l">MES</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">REST API</div>
                    <div class="mx on">Sync</div>
                    <div class="mx">-</div>
                    <div class="mx on">Context</div>
                    <div class="mx mx-l">Analytics</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">Process</div>
                    <div class="mx on">Query</div>
                    <div class="mx on">Context</div>
                    <div class="mx">-</div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="site-footer arch-footer">
            <div class="footer-credit">Created and Developed by Vivin T.S.</div>
            <div class="footer-links">
                <a href="tel:+917338937394">+91 7338937394</a>
                <a href="mailto:vivints.17@gmail.com">vivints.17@gmail.com</a>
                <a href="https://linkedin.com/in/vivin-t-s-21aa4210a" target="_blank">LinkedIn</a>
            </div>
            <div class="footer-year">&copy; 2026 Vivin T.S. All rights reserved.</div>
        </footer>
    </div>

    <script>
        // ===== PARTICLE ANIMATION =====
        (function () {
            const canvas = document.getElementById('particleCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let w, h, particles = [];

            function resize() {
                w = canvas.width = canvas.parentElement.offsetWidth;
                h = canvas.height = canvas.parentElement.offsetHeight;
            }

            function Particle() {
                this.x = Math.random() * w;
                this.y = Math.random() * h;
                this.r = Math.random() * 1.5 + 0.3;
                this.dx = (Math.random() - 0.5) * 0.4;
                this.dy = (Math.random() - 0.5) * 0.4;
                this.alpha = Math.random() * 0.5 + 0.1;
            }

            Particle.prototype.draw = function () {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(124, 108, 240, ${this.alpha})`;
                ctx.fill();
            };

            Particle.prototype.update = function () {
                this.x += this.dx;
                this.y += this.dy;
                if (this.x < 0 || this.x > w) this.dx *= -1;
                if (this.y < 0 || this.y > h) this.dy *= -1;
            };

            function init() {
                resize();
                particles = [];
                for (let i = 0; i < 80; i++) particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, w, h);
                particles.forEach(p => { p.update(); p.draw(); });

                // draw lines between close particles
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        if (dist < 120) {
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.strokeStyle = `rgba(124, 108, 240, ${0.08 * (1 - dist / 120)})`;
                            ctx.lineWidth = 0.5;
                            ctx.stroke();
                        }
                    }
                }
                requestAnimationFrame(animate);
            }

            init();
            animate();
            window.addEventListener('resize', () => { resize(); });
        })();

        // ===== PAGE SWITCHING =====
        const introPage = document.getElementById('intro');
        const archPage = document.getElementById('archPage');
        const viewBtn = document.getElementById('viewArchBtn');
        const backBtn = document.getElementById('backToIntro');

        viewBtn.addEventListener('click', (e) => {
            e.preventDefault();
            introPage.style.display = 'none';
            archPage.classList.add('active');
            window.scrollTo(0, 0);
        });

        backBtn.addEventListener('click', (e) => {
            e.preventDefault();
            archPage.classList.remove('active');
            introPage.style.display = '';
            window.scrollTo(0, 0);
        });

        // ===== MOBILE SIDEBAR =====
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.getElementById('sidebar');

        menuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            menuBtn.textContent = sidebar.classList.contains('open') ? '✕' : '☰';
        });

        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 900) {
                    sidebar.classList.remove('open');
                    menuBtn.textContent = '☰';
                }
            });
        });

        // ===== ACTIVE NAV HIGHLIGHTING =====
        const navLinks = document.querySelectorAll('.nav-link');
        const navObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    navLinks.forEach(link => {
                        link.classList.toggle('active', link.getAttribute('href') === '#' + id);
                    });
                }
            });
        }, { rootMargin: '-20% 0px -70% 0px', threshold: 0 });

        document.querySelectorAll('[id]').forEach(section => {
            if (document.querySelector(`.nav-link[href="#${section.id}"]`)) {
                navObserver.observe(section);
            }
        });

        // ===== SCROLL REVEAL ANIMATIONS =====
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry, idx) => {
                if (entry.isIntersecting) {
                    setTimeout(() => entry.target.classList.add('visible'), idx * 80);
                    revealObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

        document.querySelectorAll('.anim-in').forEach(el => revealObserver.observe(el));
    </script>
</body>

</html>