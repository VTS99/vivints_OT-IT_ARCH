<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivin T.S. — OT/IT Architecture Plan</title>
    <meta name="description" content="OT/IT Architecture - PLC to IT Integration with AI & ML by Vivin T.S.">
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
</head>

<body>

    <!-- ================================ -->
    <!--     INTRO / LANDING PAGE         -->
    <!-- ================================ -->
    <section class="intro-page" id="intro">
        <canvas class="particles" id="particleCanvas"></canvas>
        <div class="intro-content">
            <h1 class="intro-name">VIVIN T.S.</h1>
            <p class="intro-title">Assistant Manager – Automation &nbsp;|&nbsp; Digital Manufacturing &nbsp;|&nbsp; OT
                Software &nbsp;|&nbsp; IIoT</p>
            <a href="#" class="cta-btn" id="viewArchBtn">
                View IT/OT Architecture Plan <span class="arrow">→</span>
            </a>
        </div>
        <div class="scroll-hint"><span>scroll</span>
            <div class="line"></div>
        </div>

        <!-- Footer on intro page -->
        <footer class="site-footer"
            style="position:absolute;bottom:0;left:0;right:0;border-top:none;background:transparent;">
            <div class="footer-credit">Created and Developed by Vivin T.S.</div>
            <div class="footer-links">
                <a href="tel:+917338937394">+91 7338937394</a>
                <a href="mailto:vivints.17@gmail.com">vivints.17@gmail.com</a>
                <a href="https://linkedin.com/in/vivin-t-s-21aa4210a" target="_blank">LinkedIn</a>
            </div>
        </footer>
    </section>

    <!-- ================================ -->
    <!--     ARCHITECTURE PAGE            -->
    <!-- ================================ -->
    <div class="arch-page" id="archPage">

        <button class="menu-btn" id="menuBtn" aria-label="Menu">☰</button>

        <nav class="sidebar" id="sidebar">
            <div class="sidebar-brand">
                <h2>OT/IT Architecture</h2>
                <div class="sub">PLC to MES · Predictive Analytics</div>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Architecture Layers</div>
                <a href="#layer1" class="nav-link"><span class="dot dot-ot"></span> OT Level (Shop Floor)</a>
                <a href="#layer2" class="nav-link"><span class="dot dot-edge"></span> Edge Computing</a>
                <a href="#layer3" class="nav-link"><span class="dot dot-it"></span> IT Data Platform</a>
                <a href="#layer4" class="nav-link"><span class="dot dot-app"></span> Application &amp; Analytics</a>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Details</div>
                <a href="#data-flow-details" class="nav-link"><span class="dot dot-detail"></span> Data Flow Details</a>
                <a href="#tech-stack" class="nav-link"><span class="dot dot-detail"></span> Technology Stack</a>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Diagrams</div>
                <a href="#flow-diagram" class="nav-link"><span class="dot dot-diagram"></span> Flow Diagram</a>
                <a href="#integration-matrix" class="nav-link"><span class="dot dot-diagram"></span> Integration
                    Matrix</a>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Server Architecture</div>
                <a href="#server-layers" class="nav-link"><span class="dot dot-server"></span> Server Layers</a>
                <a href="#server-flow" class="nav-link"><span class="dot dot-server"></span> Server Data Flow</a>
                <a href="#server-stack" class="nav-link"><span class="dot dot-server"></span> Server Tech Stack</a>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Vision Inspection</div>
                <a href="#vision-layers" class="nav-link"><span class="dot dot-vision"></span> Inspection Layers</a>
                <a href="#vision-flow" class="nav-link"><span class="dot dot-vision"></span> Inspection Flow</a>
                <a href="#vision-stack" class="nav-link"><span class="dot dot-vision"></span> Inspection Tech Stack</a>
            </div>

            <div class="nav-group">
                <div class="nav-group-label">Site Analytics</div>
                <a href="#statistics" class="nav-link"><span class="dot dot-stats"></span> Statistics</a>
            </div>

            <a href="#" class="back-link" id="backToIntro">← Back to Intro</a>
        </nav>

        <main class="main">
            <div class="page-head">
                <h1>OT/IT Architecture</h1>
                <p>PLC to IT Integration with AI & ML </p>
            </div>

            <!-- LAYER 1 -->
            <section class="arch-section anim-in" id="layer1">
                <div class="section-label">Layer 1: OT Level (Shop Floor)</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">PLCs &amp; Controllers</div>
                        <div class="card-desc">Industrial controllers managing production machines, sensors, and
                            actuators with real-time control logic</div>
                        <div class="tags"><span class="tag">Siemens S7</span><span class="tag">Allen-Bradley</span><span
                                class="tag">Schneider</span><span class="tag">Mitsubishi</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">SCADA Systems</div>
                        <div class="card-desc">Supervisory control and data acquisition for real-time monitoring and
                            local HMI interfaces</div>
                        <div class="tags"><span class="tag">WinCC</span><span class="tag">FactoryTalk</span><span
                                class="tag">Ignition</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Local Data Storage</div>
                        <div class="card-desc">PLC-generated CSV files stored locally on machines for batch processing
                            and historical records</div>
                        <div class="tags"><span class="tag">CSV Files</span><span class="tag">Local FS</span><span
                                class="tag">Network Share</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">OPC UA | SFTP</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- LAYER 2 -->
            <section class="arch-section anim-in" id="layer2">
                <div class="section-label">Layer 2: Edge Computing &amp; Data Collection</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Kepware OPC UA Server</div>
                        <div class="card-desc">Industrial connectivity platform aggregating tag-based real-time data
                            from multiple PLCs via OPC UA protocol</div>
                        <div class="tags"><span class="tag">OPC UA</span><span class="tag">Tag Manager</span><span
                                class="tag">Real-time</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">SyncBridge (SFTP/NFS)</div>
                        <div class="card-desc">Industrial-grade file synchronization backbone for collecting CSV files
                            from machines with multi-instance architecture</div>
                        <div class="tags"><span class="tag">SFTP</span><span class="tag">NFS</span><span
                                class="tag">Python</span><span class="tag">Multi-instance</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Edge Data Buffer</div>
                        <div class="card-desc">Temporary storage and pre-processing layer ensuring data integrity and
                            handling network disruptions</div>
                        <div class="tags"><span class="tag">Redis</span><span class="tag">TimescaleDB</span><span
                                class="tag">Message Queue</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">HTTP/MQTT | REST API</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- LAYER 3 -->
            <section class="arch-section anim-in" id="layer3">
                <div class="section-label">Layer 3: IT Layer (Data Platform &amp; Storage)</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Python Data Ingestion Service</div>
                        <div class="card-desc">ETL pipeline for data validation, transformation, and standardization of
                            both tag-based and file-based data</div>
                        <div class="tags"><span class="tag">Pandas</span><span class="tag">Apache Airflow</span><span
                                class="tag">FastAPI</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Time-Series Database</div>
                        <div class="card-desc">High-performance storage for real-time tag data with efficient querying
                            and aggregation capabilities</div>
                        <div class="tags"><span class="tag">InfluxDB</span><span class="tag">TimescaleDB</span><span
                                class="tag">SQL</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Data Lake</div>
                        <div class="card-desc">Centralized repository for raw CSV files, logs, and historical data for
                            long-term storage and analytics</div>
                        <div class="tags"><span class="tag">MinIO</span><span class="tag">S3</span><span
                                class="tag">Parquet</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Data Quality &amp; Monitoring</div>
                        <div class="card-desc">Automated data validation, anomaly detection, and quality scoring for
                            incoming production data</div>
                        <div class="tags"><span class="tag">Great Expectations</span><span
                                class="tag">Prometheus</span><span class="tag">Grafana</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">REST API | WebSocket</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- LAYER 4 -->
            <section class="arch-section anim-in" id="layer4">
                <div class="section-label">Layer 4: Application &amp; Analytics Layer</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Predictive Analytics Engine</div>
                        <div class="card-desc">ML models for equipment failure prediction, quality forecasting, and
                            anomaly detection using historical and real-time data</div>
                        <div class="tags"><span class="tag">Scikit-learn</span><span class="tag">TensorFlow</span><span
                                class="tag">Prophet</span><span class="tag">XGBoost</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Real-time Dashboard</div>
                        <div class="card-desc">Web-based visualization platform for KPIs, OEE, equipment status, and
                            predictive maintenance alerts</div>
                        <div class="tags"><span class="tag">React</span><span class="tag">Plotly</span><span
                                class="tag">WebSocket</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">MES Integration</div>
                        <div class="card-desc">Manufacturing Execution System integration for production planning,
                            scheduling, and quality management</div>
                        <div class="tags"><span class="tag">SAP MES</span><span class="tag">REST API</span><span
                                class="tag">ISA-95</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">BI &amp; Reporting</div>
                        <div class="card-desc">Business intelligence tools for historical analysis, trend
                            identification, and executive reporting</div>
                        <div class="tags"><span class="tag">Power BI</span><span class="tag">Tableau</span><span
                                class="tag">Python Reports</span></div>
                    </div>
                </div>
            </section>

            <!-- Legend -->
            <div class="legend anim-in">
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--ot-color)"></div>OT Level
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--edge-color)"></div>Edge Computing
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--it-color)"></div>IT Platform
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background:var(--app-color)"></div>Application
                </div>
            </div>

            <!-- DATA FLOW DETAILS -->
            <section class="info-panel anim-in" id="data-flow-details">
                <h2>Data Flow Details</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Tag-Based Data Collection (OPC UA)</h3>
                        <ul>
                            <li>Real-time polling of PLC tags via Kepware</li>
                            <li>High-frequency data (1-10 Hz) for critical parameters</li>
                            <li>Process variables, setpoints, alarms, status bits</li>
                            <li>Low-latency streaming to time-series database</li>
                            <li>Supports multiple OPC UA namespaces</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>File-Based Data Collection (SFTP/NFS)</h3>
                        <ul>
                            <li>Batch processing of machine-generated CSV files</li>
                            <li>Production logs, quality reports, recipe data</li>
                            <li>SyncBridge handles multi-machine synchronization</li>
                            <li>Automatic file validation and error handling</li>
                            <li>Supports large file transfers with resume capability</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Python Application Functions</h3>
                        <ul>
                            <li>Data preprocessing and feature engineering</li>
                            <li>Machine learning model training and inference</li>
                            <li>Predictive maintenance algorithm execution</li>
                            <li>REST API for external system integration</li>
                            <li>Scheduled reporting and alerting</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Predictive Analytics Capabilities</h3>
                        <ul>
                            <li>Equipment failure prediction (RUL estimation)</li>
                            <li>Quality deviation forecasting</li>
                            <li>Process optimization recommendations</li>
                            <li>Anomaly detection and root cause analysis</li>
                            <li>Energy consumption optimization</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- TECH STACK -->
            <section class="info-panel anim-in" id="tech-stack">
                <h2>Technology Stack </h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Edge Layer Technologies</h3>
                        <ul>
                            <li>Kepware KEPServerEX for OPC UA connectivity</li>
                            <li>Python 3.11+ for SyncBridge and data agents</li>
                            <li>Redis for message queuing and caching</li>
                            <li>Docker for containerized edge deployments</li>
                            <li>MQTT broker (Mosquitto) for lightweight messaging</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Data Platform Stack</h3>
                        <ul>
                            <li>TimescaleDB/InfluxDB for time-series data</li>
                            <li>PostgreSQL for relational metadata</li>
                            <li>MinIO/S3 for object storage (data lake)</li>
                            <li>Apache Airflow for workflow orchestration</li>
                            <li>FastAPI for Python microservices</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>ML/Analytics Stack</h3>
                        <ul>
                            <li>Pandas, NumPy for data manipulation</li>
                            <li>Scikit-learn for traditional ML algorithms</li>
                            <li>Prophet/ARIMA for time-series forecasting</li>
                            <li>MLflow for model versioning and tracking</li>
                            <li>Jupyter notebooks for exploratory analysis</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Security &amp; Networking</h3>
                        <ul>
                            <li>Industrial DMZ with firewall segmentation</li>
                            <li>VPN/Zero Trust for remote access</li>
                            <li>TLS encryption for all data in transit</li>
                            <li>RBAC (Role-Based Access Control)</li>
                            <li>Audit logging and SIEM integration</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- FLOW DIAGRAM -->
            <section class="flow-panel anim-in" id="flow-diagram">
                <h2>Complete Data Flow Diagram</h2>

                <!-- OPC UA Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Real-time Tag Data Flow (OPC UA)</h3>
                    <div class="flow-steps">
                        <div class="flow-node start">
                            <div class="node-num">1</div>
                            <div class="node-body">
                                <div class="t">PLC Tags</div>
                                <div class="d">Temperature, Pressure, Speed, Status</div>
                                <div class="f">Polling: 1-10 Hz</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">OPC UA Protocol</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">2</div>
                            <div class="node-body">
                                <div class="t">Kepware OPC UA Server</div>
                                <div class="d">Tag aggregation &amp; protocol conversion</div>
                                <div class="x">• Multi-PLC support<br>• Tag grouping<br>• Dead-band filtering</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">OPC UA Client / MQTT</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">3</div>
                            <div class="node-body">
                                <div class="t">Python Data Agent</div>
                                <div class="d">Data validation &amp; transformation</div>
                                <div class="x">• Schema validation<br>• Unit conversion<br>• Quality checks</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">HTTP / WebSocket</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">4</div>
                            <div class="node-body">
                                <div class="t">Time-Series Database</div>
                                <div class="d">InfluxDB / TimescaleDB</div>
                                <div class="x">• High write throughput<br>• Retention policies<br>• Aggregations</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">SQL Query</div>
                        </div>
                        <div class="flow-node end">
                            <div class="node-num">5</div>
                            <div class="node-body">
                                <div class="t">Analytics &amp; Dashboards</div>
                                <div class="d">Real-time monitoring &amp; ML inference</div>
                                <div class="x">• Live charts<br>• Predictive alerts<br>• KPI calculation</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SFTP Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Batch File Data Flow (SFTP/NFS)</h3>
                    <div class="flow-steps">
                        <div class="flow-node start">
                            <div class="node-num">1</div>
                            <div class="node-body">
                                <div class="t">Machine CSV Files</div>
                                <div class="d">Production logs, Quality data, Recipes</div>
                                <div class="f">Generation: Per batch/shift</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">File System Watch</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">2</div>
                            <div class="node-body">
                                <div class="t">SyncBridge Agent</div>
                                <div class="d">File detection &amp; synchronization</div>
                                <div class="x">• Multi-instance<br>• File integrity check<br>• Resume capability</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">SFTP / NFS Transfer</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">3</div>
                            <div class="node-body">
                                <div class="t">Edge Buffer Storage</div>
                                <div class="d">Temporary staging area</div>
                                <div class="x">• Deduplication<br>• Checksum verify<br>• Queue management</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">REST API Upload</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">4</div>
                            <div class="node-body">
                                <div class="t">Python ETL Pipeline</div>
                                <div class="d">Data parsing &amp; enrichment</div>
                                <div class="x">• CSV parsing<br>• Schema mapping<br>• Data cleansing</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Dual Write</div>
                        </div>
                        <div class="split-grid">
                            <div class="flow-node">
                                <div class="node-num">5A</div>
                                <div class="node-body">
                                    <div class="t">Data Lake (S3/MinIO)</div>
                                    <div class="d">Raw file archive</div>
                                    <div class="x">• Long-term storage<br>• Versioning<br>• Parquet format</div>
                                </div>
                            </div>
                            <div class="flow-node">
                                <div class="node-num">5B</div>
                                <div class="node-body">
                                    <div class="t">PostgreSQL/TSDB</div>
                                    <div class="d">Structured data store</div>
                                    <div class="x">• Indexed queries<br>• Relational joins<br>• Fast retrieval</div>
                                </div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Data Access Layer</div>
                        </div>
                        <div class="flow-node end">
                            <div class="node-num">6</div>
                            <div class="node-body">
                                <div class="t">Analytics &amp; Reporting</div>
                                <div class="d">Historical analysis &amp; ML training</div>
                                <div class="x">• Batch processing<br>• Model training<br>• BI reports</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Predictive Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Predictive Analytics Flow</h3>
                    <div class="flow-steps h-flow">
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Data Sources</div>
                                <div class="d">Time-series + CSV + MES</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Feature Engineering</div>
                                <div class="d">Rolling stats, FFT, Lag features</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">ML Models</div>
                                <div class="d">XGBoost, LSTM, Prophet</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Predictions</div>
                                <div class="d">Failures, Quality, Energy</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Actions</div>
                                <div class="d">Alerts, Work orders, Optimization</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INTEGRATION MATRIX -->
            <section class="arch-section anim-in" id="integration-matrix">
                <div class="section-label">System Integration Matrix</div>
                <div class="matrix-grid">
                    <div class="mx mx-h"></div>
                    <div class="mx mx-h">PLC/SCADA</div>
                    <div class="mx mx-h">Kepware</div>
                    <div class="mx mx-h">SyncBridge</div>
                    <div class="mx mx-h">Python ETL</div>
                    <div class="mx mx-h">Database</div>
                    <div class="mx mx-h">MES</div>
                    <div class="mx mx-h">Analytics</div>

                    <div class="mx mx-l">PLC/SCADA</div>
                    <div class="mx">-</div>
                    <div class="mx on">OPC UA</div>
                    <div class="mx on">File Gen</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx mx-l">Kepware</div>
                    <div class="mx on">OPC UA</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">OPC Client</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx mx-l">SyncBridge</div>
                    <div class="mx on">SFTP/NFS</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">REST API</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx mx-l">Python ETL</div>
                    <div class="mx">-</div>
                    <div class="mx on">Subscribe</div>
                    <div class="mx on">REST API</div>
                    <div class="mx">-</div>
                    <div class="mx on">SQL/API</div>
                    <div class="mx on">REST API</div>
                    <div class="mx on">Data Feed</div>
                    <div class="mx mx-l">Database</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">Write</div>
                    <div class="mx">-</div>
                    <div class="mx on">Sync</div>
                    <div class="mx on">Query</div>
                    <div class="mx mx-l">MES</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">REST API</div>
                    <div class="mx on">Sync</div>
                    <div class="mx">-</div>
                    <div class="mx on">Context</div>
                    <div class="mx mx-l">Analytics</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx">-</div>
                    <div class="mx on">Process</div>
                    <div class="mx on">Query</div>
                    <div class="mx on">Context</div>
                    <div class="mx">-</div>
                </div>
            </section>

            <!-- ================================ -->
            <!--     SERVER ARCHITECTURE          -->
            <!-- ================================ -->
            <div class="section-separator anim-in">
                <div class="sep-line"></div>
                <div class="sep-title">Server Architecture</div>
                <div class="sep-line"></div>
            </div>

            <!-- SERVER LAYER 1 -->
            <section class="arch-section anim-in" id="server-layers">
                <div class="section-label">Server Layer 1: Web &amp; Application Server</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Nginx / Reverse Proxy</div>
                        <div class="card-desc">High-performance reverse proxy handling load balancing, SSL/TLS
                            termination, and static file serving for all client requests</div>
                        <div class="tags"><span class="tag">Nginx</span><span class="tag">SSL/TLS</span><span
                                class="tag">Load Balancer</span><span class="tag">HTTP/2</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">FastAPI / Python Backend</div>
                        <div class="card-desc">Async Python web framework serving REST API endpoints, WebSocket
                            connections, and handling authentication/authorization</div>
                        <div class="tags"><span class="tag">FastAPI</span><span class="tag">Uvicorn</span><span
                                class="tag">JWT Auth</span><span class="tag">WebSocket</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">React Frontend Server</div>
                        <div class="card-desc">Single-page application server delivering the dashboard UI with real-time
                            data rendering and interactive visualization components</div>
                        <div class="tags"><span class="tag">React</span><span class="tag">Vite</span><span
                                class="tag">SPA</span><span class="tag">CDN</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">HTTP / gRPC</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- SERVER LAYER 2 -->
            <section class="arch-section anim-in">
                <div class="section-label">Server Layer 2: Business Logic &amp; Processing</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Task Queue &amp; Workers</div>
                        <div class="card-desc">Distributed task queue for async job processing, scheduled background
                            tasks, and long-running computation offloading</div>
                        <div class="tags"><span class="tag">Celery</span><span class="tag">RabbitMQ</span><span
                                class="tag">Beat Scheduler</span><span class="tag">Workers</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">ML Inference Service</div>
                        <div class="card-desc">Model serving infrastructure for real-time predictions, batch inference
                            pipelines, and A/B testing of deployed models</div>
                        <div class="tags"><span class="tag">TensorFlow Serving</span><span
                                class="tag">MLflow</span><span class="tag">ONNX</span><span class="tag">REST API</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">Notification Service</div>
                        <div class="card-desc">Centralized alerting engine managing email, SMS, and push notifications
                            with escalation rules and delivery tracking</div>
                        <div class="tags"><span class="tag">SMTP</span><span class="tag">Twilio</span><span
                                class="tag">Firebase</span><span class="tag">Escalation</span></div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">SQL / Cache / Object Store</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- SERVER LAYER 3 -->
            <section class="arch-section anim-in">
                <div class="section-label">Server Layer 3: Data &amp; Storage Layer</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">PostgreSQL Database</div>
                        <div class="card-desc">Primary relational database for user accounts, configuration, production
                            metadata, and application state management</div>
                        <div class="tags"><span class="tag">PostgreSQL</span><span class="tag">SQL</span><span
                                class="tag">ACID</span><span class="tag">Migrations</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Redis Cache Layer</div>
                        <div class="card-desc">In-memory data store for session management, real-time caching, pub/sub
                            messaging, and rate limiting</div>
                        <div class="tags"><span class="tag">Redis</span><span class="tag">Sessions</span><span
                                class="tag">Pub/Sub</span><span class="tag">TTL Cache</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">MinIO / S3 Object Store</div>
                        <div class="card-desc">Scalable object storage for file uploads, ML model artifacts, production
                            data backups, and report archive</div>
                        <div class="tags"><span class="tag">MinIO</span><span class="tag">S3 API</span><span
                                class="tag">Versioning</span><span class="tag">Lifecycle</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">TimescaleDB</div>
                        <div class="card-desc">Time-series extension on PostgreSQL for high-frequency production data,
                            aggregated metrics, and trend analysis</div>
                        <div class="tags"><span class="tag">TimescaleDB</span><span class="tag">Hypertables</span><span
                                class="tag">Continuous Agg</span><span class="tag">Retention</span></div>
                    </div>
                </div>
            </section>

            <!-- SERVER DATA FLOW -->
            <section class="flow-panel anim-in" id="server-flow">
                <h2>Server Data Flow</h2>
                <div class="flow-path">
                    <h3 class="flow-path-title">Client Request → Response Lifecycle</h3>
                    <div class="flow-steps">
                        <div class="flow-node start">
                            <div class="node-num">1</div>
                            <div class="node-body">
                                <div class="t">Client Request</div>
                                <div class="d">Browser / Mobile / API Consumer</div>
                                <div class="f">HTTPS / WSS</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">HTTPS / TLS 1.3</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">2</div>
                            <div class="node-body">
                                <div class="t">Nginx Reverse Proxy</div>
                                <div class="d">SSL termination &amp; load balancing</div>
                                <div class="x">• Rate limiting<br>• Request routing<br>• Static assets</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Upstream / Unix Socket</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">3</div>
                            <div class="node-body">
                                <div class="t">FastAPI Application</div>
                                <div class="d">Request validation &amp; business logic</div>
                                <div class="x">• JWT verification<br>• Schema validation<br>• Route handling</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">ORM / Cache Query</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">4</div>
                            <div class="node-body">
                                <div class="t">Data Access Layer</div>
                                <div class="d">SQLAlchemy ORM &amp; Redis cache</div>
                                <div class="x">• Query optimization<br>• Cache-aside pattern<br>• Connection pooling
                                </div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">SQL / Redis Protocol</div>
                        </div>
                        <div class="split-grid">
                            <div class="flow-node">
                                <div class="node-num">5A</div>
                                <div class="node-body">
                                    <div class="t">PostgreSQL / TimescaleDB</div>
                                    <div class="d">Persistent data store</div>
                                    <div class="x">• Relational queries<br>• Time-series data<br>• Transactions</div>
                                </div>
                            </div>
                            <div class="flow-node">
                                <div class="node-num">5B</div>
                                <div class="node-body">
                                    <div class="t">Redis / MinIO</div>
                                    <div class="d">Cache &amp; object storage</div>
                                    <div class="x">• Session data<br>• File retrieval<br>• Pub/Sub events</div>
                                </div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">JSON Response</div>
                        </div>
                        <div class="flow-node end">
                            <div class="node-num">6</div>
                            <div class="node-body">
                                <div class="t">Client Response</div>
                                <div class="d">Serialized JSON / WebSocket push</div>
                                <div class="x">• Compressed payload<br>• Cache headers<br>• Real-time updates</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Async Processing Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Async Task Processing Flow</h3>
                    <div class="flow-steps h-flow">
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">API Trigger</div>
                                <div class="d">User action or scheduled event</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Message Broker</div>
                                <div class="d">RabbitMQ / Redis Queue</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Celery Worker</div>
                                <div class="d">Task execution &amp; retry logic</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Result Store</div>
                                <div class="d">Redis / PostgreSQL</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Notification</div>
                                <div class="d">WebSocket / Email / Push</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SERVER TECH STACK -->
            <section class="info-panel anim-in" id="server-stack">
                <h2>Server Technology Stack</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Web Server Stack</h3>
                        <ul>
                            <li>Nginx for reverse proxy and load balancing</li>
                            <li>Gunicorn / Uvicorn ASGI server</li>
                            <li>Let's Encrypt for automated SSL certificates</li>
                            <li>HTTP/2 and WebSocket support</li>
                            <li>Rate limiting and DDoS protection</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Application Framework</h3>
                        <ul>
                            <li>FastAPI for async REST &amp; WebSocket APIs</li>
                            <li>Pydantic for data validation &amp; serialization</li>
                            <li>SQLAlchemy ORM with async support</li>
                            <li>Alembic for database migrations</li>
                            <li>Celery for distributed task processing</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Infrastructure &amp; DevOps</h3>
                        <ul>
                            <li>Docker &amp; Docker Compose for containerization</li>
                            <li>Kubernetes for orchestration and scaling</li>
                            <li>GitHub Actions for CI/CD pipelines</li>
                            <li>Terraform for infrastructure as code</li>
                            <li>Vault for secrets management</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Monitoring &amp; Observability</h3>
                        <ul>
                            <li>Prometheus for metrics collection</li>
                            <li>Grafana for dashboards and alerting</li>
                            <li>ELK Stack (Elasticsearch, Logstash, Kibana)</li>
                            <li>Sentry for error tracking and tracing</li>
                            <li>Jaeger for distributed tracing</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ================================ -->
            <!--     VISION INSPECTION            -->
            <!-- ================================ -->
            <div class="section-separator anim-in">
                <div class="sep-line"></div>
                <div class="sep-title">Vision Inspection — Battery 4680</div>
                <div class="sep-line"></div>
            </div>

            <!-- VISION LAYER 1 -->
            <section class="arch-section anim-in" id="vision-layers">
                <div class="section-label">Layer 1: Image Acquisition (CCD Capture)</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">CCD Line-Scan Camera Array</div>
                        <div class="card-desc">High-resolution CCD cameras capturing 360° surface images of 4680
                            cylindrical battery cells at production speed for defect detection</div>
                        <div class="tags"><span class="tag">CCD Sensor</span><span class="tag">Line-Scan</span><span
                                class="tag">12K Resolution</span><span class="tag">GigE Vision</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Lighting &amp; Illumination System</div>
                        <div class="card-desc">Structured LED lighting modules with multi-angle illumination to reveal
                            surface defects, scratches, dents, and weld seam anomalies on battery casing</div>
                        <div class="tags"><span class="tag">LED Bar Lights</span><span class="tag">Coaxial</span><span
                                class="tag">Dome Light</span><span class="tag">Strobe Control</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Image Acquisition Controller</div>
                        <div class="card-desc">Real-time frame grabber and trigger synchronization unit coordinating
                            camera exposure with cell movement on production conveyor</div>
                        <div class="tags"><span class="tag">Frame Grabber</span><span class="tag">Encoder
                                Trigger</span><span class="tag">PLC Sync</span><span class="tag">GPIO</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Calibration &amp; Alignment Module</div>
                        <div class="card-desc">Automated geometric and photometric calibration ensuring measurement
                            accuracy and consistent image quality across shifts</div>
                        <div class="tags"><span class="tag">Auto-Calibration</span><span class="tag">Pixel/mm
                                Mapping</span><span class="tag">Focus Control</span><span class="tag">Flatfield</span>
                        </div>
                    </div>
                </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">GigE Vision | Camera Link</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- VISION LAYER 2 -->
            <section class="arch-section anim-in">
                <div class="section-label">Layer 2: Image Processing &amp; AI Analysis</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Pre-Processing Pipeline</div>
                        <div class="card-desc">Image enhancement, noise reduction, ROI extraction, and normalization to
                            prepare raw CCD frames for defect detection algorithms</div>
                        <div class="tags"><span class="tag">OpenCV</span><span class="tag">Gaussian Filter</span><span
                                class="tag">ROI Crop</span><span class="tag">Histogram EQ</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Deep Learning Defect Detection</div>
                        <div class="card-desc">CNN-based models trained on 4680 battery defect datasets for automated
                            classification of surface anomalies, weld defects, and dimensional deviations</div>
                        <div class="tags"><span class="tag">YOLOv8</span><span class="tag">ResNet</span><span
                                class="tag">Semantic Seg</span><span class="tag">TensorRT</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Measurement &amp; Metrology Engine</div>
                        <div class="card-desc">Sub-pixel accurate dimensional measurement of cell diameter, height, tab
                            alignment, and crimp seal geometry against tolerance specifications</div>
                        <div class="tags"><span class="tag">Sub-pixel</span><span class="tag">Edge Detection</span><span
                                class="tag">Gauging</span><span class="tag">GD&amp;T</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">GPU Inference Server</div>
                        <div class="card-desc">NVIDIA GPU-accelerated inference for real-time processing of
                            high-resolution images with <100ms latency per cell inspection</div>
                                <div class="tags"><span class="tag">NVIDIA T4/A100</span><span
                                        class="tag">CUDA</span><span class="tag">TensorRT</span><span
                                        class="tag">Triton</span></div>
                        </div>
                    </div>
            </section>

            <div class="flow-divider anim-in">
                <div class="flow-arrow">↓</div>
                <div class="flow-label">REST API | gRPC</div>
                <div class="flow-arrow">↓</div>
            </div>

            <!-- VISION LAYER 3 -->
            <section class="arch-section anim-in">
                <div class="section-label">Layer 3: Quality Decision &amp; Reporting</div>
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Pass/Fail Classification Engine</div>
                        <div class="card-desc">Rule-based and ML-driven quality gate combining defect severity scoring
                            with tolerance thresholds for automated accept/reject decisions</div>
                        <div class="tags"><span class="tag">Quality Gate</span><span class="tag">Severity
                                Score</span><span class="tag">Auto-Reject</span><span class="tag">SPC</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Defect Image Archive</div>
                        <div class="card-desc">Structured storage of all inspection images with defect annotations,
                            traceability per cell serial number, and model retraining dataset curation</div>
                        <div class="tags"><span class="tag">MinIO/S3</span><span class="tag">Traceability</span><span
                                class="tag">Annotation DB</span><span class="tag">Dataset Mgmt</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">Quality Dashboard &amp; Analytics</div>
                        <div class="card-desc">Real-time visualisation of inspection KPIs — defect rate trends, Pareto
                            charts, yield per batch, and alarm notification for quality excursions</div>
                        <div class="tags"><span class="tag">Grafana</span><span class="tag">Pareto</span><span
                                class="tag">SPC Charts</span><span class="tag">Yield Tracking</span></div>
                    </div>
                    <div class="card">
                        <div class="card-title">MES &amp; PLC Feedback Loop</div>
                        <div class="card-desc">Direct integration sending pass/fail signals to PLC for cell
                            sorting/ejection and reporting quality data upstream to MES for batch records</div>
                        <div class="tags"><span class="tag">OPC UA</span><span class="tag">MES API</span><span
                                class="tag">Digital I/O</span><span class="tag">Batch Record</span></div>
                    </div>
                </div>
            </section>

            <!-- VISION INSPECTION FLOW -->
            <section class="flow-panel anim-in" id="vision-flow">
                <h2>Vision Inspection Data Flow</h2>
                <div class="flow-path">
                    <h3 class="flow-path-title">CCD Image Capture → Quality Decision Pipeline (Battery 4680)</h3>
                    <div class="flow-steps">
                        <div class="flow-node start">
                            <div class="node-num">1</div>
                            <div class="node-body">
                                <div class="t">Battery Cell on Conveyor</div>
                                <div class="d">4680 cell enters inspection station</div>
                                <div class="f">Line Speed: 200+ cells/min</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Encoder Trigger</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">2</div>
                            <div class="node-body">
                                <div class="t">CCD Image Capture</div>
                                <div class="d">Multi-camera 360° surface scan</div>
                                <div class="x">• Top view (tab/vent)<br>• Side view (casing)<br>• Bottom view (crimp
                                    seal)</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">GigE Vision / CoaXPress</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">3</div>
                            <div class="node-body">
                                <div class="t">Pre-Processing</div>
                                <div class="d">Image enhancement &amp; ROI extraction</div>
                                <div class="x">• Noise reduction<br>• Contrast normalization<br>• Geometric correction
                                </div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">GPU Memory Transfer</div>
                        </div>
                        <div class="flow-node">
                            <div class="node-num">4</div>
                            <div class="node-body">
                                <div class="t">AI Defect Detection</div>
                                <div class="d">CNN inference + dimensional measurement</div>
                                <div class="x">• Surface defects<br>• Weld seam analysis<br>• Dimension check</div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Classification Result</div>
                        </div>
                        <div class="split-grid">
                            <div class="flow-node">
                                <div class="node-num">5A</div>
                                <div class="node-body">
                                    <div class="t">PASS → Continue Line</div>
                                    <div class="d">Cell proceeds to next station</div>
                                    <div class="x">• Serial logged<br>• Image archived<br>• MES updated</div>
                                </div>
                            </div>
                            <div class="flow-node">
                                <div class="node-num">5B</div>
                                <div class="node-body">
                                    <div class="t">FAIL → Eject / Sort</div>
                                    <div class="d">Defective cell removed</div>
                                    <div class="x">• PLC reject signal<br>• Defect annotated<br>• Alarm triggered</div>
                                </div>
                            </div>
                        </div>
                        <div class="connector">
                            <div class="conn-line"></div>
                            <div class="conn-label">Data Persistence</div>
                        </div>
                        <div class="flow-node end">
                            <div class="node-num">6</div>
                            <div class="node-body">
                                <div class="t">Quality Analytics &amp; Feedback</div>
                                <div class="d">Dashboard, SPC, model retraining loop</div>
                                <div class="x">• Defect trend analysis<br>• Yield KPIs<br>• Continuous improvement</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Defect Classification Flow -->
                <div class="flow-path">
                    <h3 class="flow-path-title">Defect Classification Categories (4680 Battery)</h3>
                    <div class="flow-steps h-flow">
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Surface Defects</div>
                                <div class="d">Scratches, Dents, Contamination</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Weld Defects</div>
                                <div class="d">Spatter, Porosity, Misalignment</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Dimensional</div>
                                <div class="d">Diameter, Height, Ovality</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Seal Integrity</div>
                                <div class="d">Crimp quality, Vent shape</div>
                            </div>
                        </div>
                        <div class="h-arrow">→</div>
                        <div class="flow-node">
                            <div class="node-body">
                                <div class="t">Label / Marking</div>
                                <div class="d">OCR, QR, Laser etch verify</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VISION TECH STACK -->
            <section class="info-panel anim-in" id="vision-stack">
                <h2>Vision Inspection Technology Stack</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Camera &amp; Optics</h3>
                        <ul>
                            <li>Basler / FLIR CCD line-scan cameras (12K pixels)</li>
                            <li>Telecentric lenses for distortion-free imaging</li>
                            <li>Multi-wavelength LED illumination (White, IR, UV)</li>
                            <li>GigE Vision / CoaXPress interfaces</li>
                            <li>Motorized focus and aperture control</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Image Processing &amp; AI</h3>
                        <ul>
                            <li>OpenCV and HALCON for classical vision algorithms</li>
                            <li>PyTorch / TensorFlow for deep learning models</li>
                            <li>YOLOv8 for real-time defect detection</li>
                            <li>NVIDIA TensorRT for optimised GPU inference</li>
                            <li>Label Studio for defect annotation workflows</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Compute &amp; Infrastructure</h3>
                        <ul>
                            <li>NVIDIA Jetson AGX / GPU workstation at edge</li>
                            <li>Matrox Rapixo frame grabbers</li>
                            <li>Docker containers for vision microservices</li>
                            <li>NVIDIA Triton Inference Server</li>
                            <li>High-speed NVMe storage for image buffering</li>
                        </ul>
                    </div>
                    <div class="info-card">
                        <h3>Integration &amp; Traceability</h3>
                        <ul>
                            <li>OPC UA for PLC reject/accept signal feedback</li>
                            <li>REST API for MES quality record submission</li>
                            <li>Unique cell serial number (barcode / laser etch)</li>
                            <li>Image archival with MinIO/S3 (7+ year retention)</li>
                            <li>MLOps pipeline for model retraining (MLflow)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ================================ -->
            <!--     STATISTICS DASHBOARD         -->
            <!-- ================================ -->
            <div class="section-separator anim-in">
                <div class="sep-line"></div>
                <div class="sep-title">Site Statistics</div>
                <div class="sep-line"></div>
            </div>

            <section class="info-panel anim-in" id="statistics">
                <h2>Statistics Dashboard</h2>

                <!-- Password Gate -->
                <div class="stats-gate" id="statsGate">
                    <div class="stats-gate-box" id="statsGateBox">
                        <span class="gate-lock">🔒</span>
                        <h3>Protected Area</h3>
                        <p class="gate-sub">Enter password to view site analytics</p>
                        <div class="stats-input-group">
                            <input type="password" id="statsPassword" placeholder="Enter password..."
                                autocomplete="off">
                            <button class="stats-unlock-btn" id="statsUnlockBtn">Unlock</button>
                        </div>
                        <div class="stats-error" id="statsError"></div>
                    </div>
                </div>

                <!-- Dashboard (hidden until password entered) -->
                <div class="stats-dashboard" id="statsDashboard">
                    <div class="stats-cards-grid">
                        <div class="stat-card">
                            <div class="stat-label">Live Visitors</div>
                            <div class="stat-value"><span class="live-dot"></span><span id="statLive">0</span></div>
                            <div class="stat-sub">Currently on page</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Visits</div>
                            <div class="stat-value" id="statTotal">0</div>
                            <div class="stat-sub">All-time page views</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Today's Visits</div>
                            <div class="stat-value" id="statToday">0</div>
                            <div class="stat-sub" id="statTodayDate">—</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Current Session</div>
                            <div class="stat-value" id="statSession">0:00</div>
                            <div class="stat-sub">Time on page now</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Avg. Session</div>
                            <div class="stat-value" id="statAvgSession">0:00</div>
                            <div class="stat-sub">Average time per visit</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Time</div>
                            <div class="stat-value" id="statTotalTime">0h</div>
                            <div class="stat-sub">Cumulative all visitors</div>
                        </div>
                    </div>

                    <h3 class="stats-section-title">Access Sources</h3>
                    <div class="stats-table-wrap">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Source / Referrer</th>
                                    <th>Visits</th>
                                    <th>Share</th>
                                </tr>
                            </thead>
                            <tbody id="statsSources"></tbody>
                        </table>
                    </div>

                    <h3 class="stats-section-title">Recent Visits</h3>
                    <div class="stats-table-wrap">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Date & Time</th>
                                    <th>Duration</th>
                                    <th>Source</th>
                                    <th>Device</th>
                                </tr>
                            </thead>
                            <tbody id="statsVisits"></tbody>
                        </table>
                    </div>

                    <div class="stats-firebase-note">
                        ⚠️ <strong>Firebase Setup Required:</strong> Replace the placeholder Firebase config in the HTML
                        source with your actual Firebase project credentials. Create a free project at <a
                            href="https://console.firebase.google.com" target="_blank"
                            style="color:var(--secondary)">console.firebase.google.com</a>, enable Realtime Database,
                        and set the rules to allow read/write.
                    </div>

                    <button class="stats-logout-btn" id="statsLogout">Lock Statistics</button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="site-footer arch-footer">
            <div class="footer-credit">Created and Developed by Vivin T.S.</div>
            <div class="footer-links">
                <a href="tel:+917338937394">+91 7338937394</a>
                <a href="mailto:vivints.17@gmail.com">vivints.17@gmail.com</a>
                <a href="https://linkedin.com/in/vivin-t-s-21aa4210a" target="_blank">LinkedIn</a>
            </div>
            <div class="footer-year">&copy; 2026 Vivin T.S. All rights reserved.</div>
        </footer>
    </div>

    <script>
        // ===== PARTICLE ANIMATION =====
        (function () {
            const canvas = document.getElementById('particleCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let w, h, particles = [];

            function resize() {
                w = canvas.width = canvas.parentElement.offsetWidth;
                h = canvas.height = canvas.parentElement.offsetHeight;
            }

            function Particle() {
                this.x = Math.random() * w;
                this.y = Math.random() * h;
                this.r = Math.random() * 1.5 + 0.3;
                this.dx = (Math.random() - 0.5) * 0.4;
                this.dy = (Math.random() - 0.5) * 0.4;
                this.alpha = Math.random() * 0.5 + 0.1;
            }

            Particle.prototype.draw = function () {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(124, 108, 240, ${this.alpha})`;
                ctx.fill();
            };

            Particle.prototype.update = function () {
                this.x += this.dx;
                this.y += this.dy;
                if (this.x < 0 || this.x > w) this.dx *= -1;
                if (this.y < 0 || this.y > h) this.dy *= -1;
            };

            function init() {
                resize();
                particles = [];
                for (let i = 0; i < 80; i++) particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, w, h);
                particles.forEach(p => { p.update(); p.draw(); });

                // draw lines between close particles
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        if (dist < 120) {
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.strokeStyle = `rgba(124, 108, 240, ${0.08 * (1 - dist / 120)})`;
                            ctx.lineWidth = 0.5;
                            ctx.stroke();
                        }
                    }
                }
                requestAnimationFrame(animate);
            }

            init();
            animate();
            window.addEventListener('resize', () => { resize(); });
        })();

        // ===== PAGE SWITCHING =====
        const introPage = document.getElementById('intro');
        const archPage = document.getElementById('archPage');
        const viewBtn = document.getElementById('viewArchBtn');
        const backBtn = document.getElementById('backToIntro');

        viewBtn.addEventListener('click', (e) => {
            e.preventDefault();
            introPage.style.display = 'none';
            archPage.classList.add('active');
            window.scrollTo(0, 0);
        });

        backBtn.addEventListener('click', (e) => {
            e.preventDefault();
            archPage.classList.remove('active');
            introPage.style.display = '';
            window.scrollTo(0, 0);
        });

        // ===== MOBILE SIDEBAR =====
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.getElementById('sidebar');

        menuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            menuBtn.textContent = sidebar.classList.contains('open') ? '✕' : '☰';
        });

        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 900) {
                    sidebar.classList.remove('open');
                    menuBtn.textContent = '☰';
                }
            });
        });

        // ===== ACTIVE NAV HIGHLIGHTING =====
        const navLinks = document.querySelectorAll('.nav-link');
        const navObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    navLinks.forEach(link => {
                        link.classList.toggle('active', link.getAttribute('href') === '#' + id);
                    });
                }
            });
        }, { rootMargin: '-20% 0px -70% 0px', threshold: 0 });

        document.querySelectorAll('[id]').forEach(section => {
            if (document.querySelector(`.nav-link[href="#${section.id}"]`)) {
                navObserver.observe(section);
            }
        });

        // ===== SCROLL REVEAL ANIMATIONS =====
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry, idx) => {
                if (entry.isIntersecting) {
                    setTimeout(() => entry.target.classList.add('visible'), idx * 80);
                    revealObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

        document.querySelectorAll('.anim-in').forEach(el => revealObserver.observe(el));

        // ===== FIREBASE ANALYTICS ENGINE =====
        (function () {
            // ── Firebase Configuration ──
            // REPLACE these with your actual Firebase project credentials
            const firebaseConfig = {
                apiKey: "YOUR_API_KEY",
                authDomain: "YOUR_PROJECT.firebaseapp.com",
                databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
                projectId: "YOUR_PROJECT",
                storageBucket: "YOUR_PROJECT.appspot.com",
                messagingSenderId: "000000000000",
                appId: "YOUR_APP_ID"
            };

            let db;
            let sessionStart = Date.now();
            let sessionKey = null;
            let sessionTimer = null;
            let firebaseReady = false;

            try {
                if (typeof firebase !== 'undefined' && firebase.initializeApp) {
                    firebase.initializeApp(firebaseConfig);
                    db = firebase.database();
                    firebaseReady = firebaseConfig.apiKey !== 'YOUR_API_KEY';
                }
            } catch (e) {
                console.warn('Firebase init skipped:', e.message);
            }

            // ── Utility functions ──
            function getDeviceType() {
                const ua = navigator.userAgent;
                if (/Mobile|Android|iPhone|iPad/i.test(ua)) return 'Mobile';
                if (/Tablet|iPad/i.test(ua)) return 'Tablet';
                return 'Desktop';
            }

            function getReferrerSource() {
                const ref = document.referrer;
                if (!ref) return 'Direct';
                try {
                    const url = new URL(ref);
                    const host = url.hostname.replace('www.', '');
                    if (host.includes('google')) return 'Google';
                    if (host.includes('linkedin')) return 'LinkedIn';
                    if (host.includes('github')) return 'GitHub';
                    if (host.includes('facebook') || host.includes('fb.')) return 'Facebook';
                    if (host.includes('twitter') || host.includes('x.com')) return 'Twitter/X';
                    if (host.includes('instagram')) return 'Instagram';
                    if (host.includes('youtube')) return 'YouTube';
                    if (host.includes('t.co')) return 'Twitter/X';
                    return host;
                } catch (e) {
                    return 'Unknown';
                }
            }

            function formatDuration(ms) {
                const totalSec = Math.floor(ms / 1000);
                if (totalSec < 60) return totalSec + 's';
                const m = Math.floor(totalSec / 60);
                const s = totalSec % 60;
                if (m < 60) return m + ':' + String(s).padStart(2, '0');
                const h = Math.floor(m / 60);
                const rm = m % 60;
                return h + 'h ' + rm + 'm';
            }

            function formatDateTime(ts) {
                const d = new Date(ts);
                return d.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' }) +
                    ' ' + d.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });
            }

            function todayKey() {
                const d = new Date();
                return d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');
            }

            // ── Record visit to Firebase ──
            function recordVisit() {
                if (!firebaseReady || !db) return;
                const visitData = {
                    timestamp: Date.now(),
                    source: getReferrerSource(),
                    device: getDeviceType(),
                    screen: window.innerWidth + 'x' + window.innerHeight,
                    userAgent: navigator.userAgent.substring(0, 120),
                    duration: 0
                };
                const ref = db.ref('visits').push(visitData);
                sessionKey = ref.key;

                // Track presence (live visitors)
                const presenceRef = db.ref('presence/' + sessionKey);
                presenceRef.set(true);
                presenceRef.onDisconnect().remove();

                // Update duration on page unload
                window.addEventListener('beforeunload', function () {
                    if (sessionKey) {
                        const duration = Date.now() - sessionStart;
                        db.ref('visits/' + sessionKey + '/duration').set(duration);
                        presenceRef.remove();
                    }
                });

                // Periodically update duration while page is open
                setInterval(function () {
                    if (sessionKey) {
                        db.ref('visits/' + sessionKey + '/duration').set(Date.now() - sessionStart);
                    }
                }, 30000);
            }

            recordVisit();

            // ── Password gate ──
            const STATS_PASS = 'Vivin123@';
            const gate = document.getElementById('statsGate');
            const gateBox = document.getElementById('statsGateBox');
            const dashboard = document.getElementById('statsDashboard');
            const passInput = document.getElementById('statsPassword');
            const unlockBtn = document.getElementById('statsUnlockBtn');
            const errorEl = document.getElementById('statsError');
            const logoutBtn = document.getElementById('statsLogout');

            function unlockStats() {
                if (passInput.value === STATS_PASS) {
                    gate.style.display = 'none';
                    dashboard.classList.add('unlocked');
                    errorEl.textContent = '';
                    startDashboard();
                } else {
                    errorEl.textContent = 'Incorrect password. Try again.';
                    gateBox.classList.add('shake');
                    setTimeout(() => gateBox.classList.remove('shake'), 500);
                    passInput.value = '';
                    passInput.focus();
                }
            }

            unlockBtn.addEventListener('click', unlockStats);
            passInput.addEventListener('keydown', function (e) {
                if (e.key === 'Enter') unlockStats();
            });

            logoutBtn.addEventListener('click', function () {
                dashboard.classList.remove('unlocked');
                gate.style.display = '';
                passInput.value = '';
                if (sessionTimer) clearInterval(sessionTimer);
            });

            // ── Dashboard data rendering ──
            function startDashboard() {
                updateSessionTimer();
                sessionTimer = setInterval(updateSessionTimer, 1000);

                if (!firebaseReady || !db) {
                    document.getElementById('statLive').textContent = '—';
                    document.getElementById('statTotal').textContent = '—';
                    document.getElementById('statToday').textContent = '—';
                    document.getElementById('statAvgSession').textContent = '—';
                    document.getElementById('statTotalTime').textContent = '—';
                    document.getElementById('statsSources').innerHTML = '<tr><td colspan="3" style="text-align:center;color:var(--accent-amber);padding:24px">Firebase not configured. Replace the placeholder config in the HTML source with your Firebase credentials.</td></tr>';
                    document.getElementById('statsVisits').innerHTML = '<tr><td colspan="4" style="text-align:center;color:var(--accent-amber);padding:24px">No data available — configure Firebase first.</td></tr>';
                    return;
                }

                // Live visitors (real-time listener)
                db.ref('presence').on('value', function (snap) {
                    const count = snap.numChildren();
                    document.getElementById('statLive').textContent = count;
                });

                // All visits (fetch once then listen)
                db.ref('visits').orderByChild('timestamp').limitToLast(500).on('value', function (snap) {
                    const visits = [];
                    snap.forEach(function (child) {
                        visits.push(child.val());
                    });
                    renderStats(visits);
                });
            }

            function updateSessionTimer() {
                const elapsed = Date.now() - sessionStart;
                document.getElementById('statSession').textContent = formatDuration(elapsed);
            }

            function renderStats(visits) {
                // Total visits
                document.getElementById('statTotal').textContent = visits.length;

                // Today's visits
                const today = todayKey();
                const todayVisits = visits.filter(function (v) {
                    return todayKey() === (function (ts) {
                        const d = new Date(ts);
                        return d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0');
                    })(v.timestamp);
                });
                document.getElementById('statToday').textContent = todayVisits.length;
                document.getElementById('statTodayDate').textContent = new Date().toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });

                // Average session duration
                const durations = visits.map(function (v) { return v.duration || 0; }).filter(function (d) { return d > 0; });
                const avgDuration = durations.length > 0 ? durations.reduce(function (a, b) { return a + b; }, 0) / durations.length : 0;
                document.getElementById('statAvgSession').textContent = formatDuration(avgDuration);

                // Total cumulative time
                const totalTime = durations.reduce(function (a, b) { return a + b; }, 0);
                document.getElementById('statTotalTime').textContent = formatDuration(totalTime);

                // Access sources
                const sources = {};
                visits.forEach(function (v) {
                    const src = v.source || 'Unknown';
                    sources[src] = (sources[src] || 0) + 1;
                });
                const sortedSources = Object.entries(sources).sort(function (a, b) { return b[1] - a[1]; });
                const maxSourceCount = sortedSources.length > 0 ? sortedSources[0][1] : 1;
                let sourcesHTML = '';
                sortedSources.forEach(function (entry) {
                    const pct = ((entry[1] / visits.length) * 100).toFixed(1);
                    const barW = Math.max(4, (entry[1] / maxSourceCount) * 120);
                    sourcesHTML += '<tr><td>' + entry[0] + '</td><td>' + entry[1] + '</td><td><div class="source-bar"><div class="source-bar-fill" style="width:' + barW + 'px"></div><span class="source-bar-pct">' + pct + '%</span></div></td></tr>';
                });
                document.getElementById('statsSources').innerHTML = sourcesHTML || '<tr><td colspan="3" style="text-align:center;padding:20px;color:var(--text-muted)">No data yet</td></tr>';

                // Recent visits (last 50, newest first)
                const recent = visits.slice().reverse().slice(0, 50);
                let visitsHTML = '';
                recent.forEach(function (v) {
                    visitsHTML += '<tr><td>' + formatDateTime(v.timestamp) + '</td><td>' + formatDuration(v.duration || 0) + '</td><td>' + (v.source || '—') + '</td><td>' + (v.device || '—') + '</td></tr>';
                });
                document.getElementById('statsVisits').innerHTML = visitsHTML || '<tr><td colspan="4" style="text-align:center;padding:20px;color:var(--text-muted)">No visits recorded yet</td></tr>';
            }
        })();
    </script>
</body>

</html>